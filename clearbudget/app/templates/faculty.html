{% extends 'base.html' %}

{% block content %}
<h2>{{ faculty_to_edit.name if faculty_to_edit else 'Add New Faculty' }}</h2>

<form action="{{ url_for('faculty.add_faculty') if not faculty_to_edit else url_for('faculty.edit_faculty', faculty_id=faculty_to_edit.faculty_id) }}" method="post">
    Name: <input type="text" name="name" value="{{ faculty_to_edit.name if faculty_to_edit else '' }}" required>
    Title: <input type="text" name="title" value="{{ faculty_to_edit.title if faculty_to_edit else '' }}">
    Salary: <input type="number" name="annual_salary" step="0.01" value="{{ faculty_to_edit.annual_salary if faculty_to_edit else '' }}" required>
    Fringe: <input type="number" name="fringe_rate" step="0.01" value="{{ faculty_to_edit.fringe_rate if faculty_to_edit else '' }}" required>
    <button type="submit">{{ 'Update' if faculty_to_edit else 'Add Faculty' }}</button>
</form>

<h3>Existing Faculty</h3>
<table border="1" cellpadding="5">
    <tr>
        <th>Name</th>
        <th>Title</th>
        <th>Salary ($)</th>
        <th>Fringe (%)</th>
        <th>Actions</th>
    </tr>
    {% for f in faculty %}
    <tr>
        <td>{{ f.name }}</td>
        <td>{{ f.title }}</td>
        <td>{{ "%.2f"|format(f.annual_salary) }}</td>
        <td>{{ "%.2f"|format(f.fringe_rate) }}</td>
        <td>
            <a href="{{ url_for('faculty.edit_faculty', faculty_id=f.faculty_id) }}">Edit</a>
            
            <form action="{{ url_for('faculty.delete_faculty', faculty_id=f.faculty_id) }}" method="post" style="display:inline">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this faculty?');">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
